Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2020-01-24T14:56:20+03:00

====== Использование абсолютных и относительных путей с командой add ======
Создан Пятница 24 Январь 2020

Категории файлов в выводе команды ''git status -s''
M - (modified) отслеживаемые, изменились с прошлого коммита, еще не добавлены
D - (deleted) отслеживаемые, удалены после прошлого коммита, еще не добавлены
? - (untracked) неотслеживаемые, не запрещены к добавлению
! - (ignored) неотслеживаемые, запрещены к добавлению (например, в .gitignore)

Путь . обозначает текущую директорию, т.е. ту, в которой была запущена команда.

NB! Начиная с Git версии 2.0, поведение команды add приведено в соответствие с поведением commit и других комманд. Теперь . обозначает не всю рабочую область (working tree), а текущий путь в этой области.

Таким образом, если выполнять команду add не в корневой директории проекта (той, где лежит .git/), то будет обработано содержимое только текущей директории.

Чтобы явным образом дать указание Git работать со всей рабочей областью, необходимо использовать :/

{{{code: lang="sh" linenumbers="False"
# работает одинаково из любой директории, добавляет всю рабочую область
git add :/

# путь относительно корневой директории
git add :/path/to/files/

# работает только в текущей директории
cd test
git add .
# эквивалентно этому:
git add :/test

# путь относительно текущей директории
cd test
git add ./path
# эквивалентно этому:
git add :/test/path
}}}


Если не указан никакой путь к добавляемым файлам, то большинство команд работает во всей рабочей области, а git add и git add --no-all просто не работают.

===== Сводная таблица =====
{{./pasted_image.png}}

===== О функционале команд подробно =====
{{{code: lang="sh" linenumbers="False"
$ git add .
$ git add '*'
}}}

Git версии 2.0+ просматривает текущую папку и добавляет файлы M, D, ?.
Git версии 1.х просматривает всю рабочую область и добавляет файлы M, D.

Если '*' дается в кавычках, то обрабатывать его будет Git и это эквивалентно git add .. Исключение: из-под cmd.exe git add '*' не сработает, используйте git add . или git add *.
{{{code: lang="sh" linenumbers="False"
$ git add --no-all :/
$ git add --ignore-removal :/
}}}

Эта команда в Git v. 2.0+ работает как git add . в Git v. 1.x, то есть добавляет измененные и новые файлы M, ? во всей рабочей области. Для этой команды обязательно указывать путь.
{{{code: lang="sh" linenumbers="False"
$ git add --no-all . #добавляет измененные и новые файлы в *текущей директории*
$ git add --no-all path1/ path2/ # добавляет измененные и новые файлы в путях *относительно текущей директории*
}}}

Обновление (update) статуса уже отслеживаемых файлов т.е. M, D.
{{{code: lang="sh" linenumbers="False"
$ git add -u
$ git add -update
}}}


Добавление M, D, ? файлов
{{{code: lang="sh" linenumbers="False"
$ git add -A
$ git add --all
$ git add --no-ignore-removal
}}}


Без точки — из всей рабочей области:

''git add -A = git add -A :/ = git add :/ + git add -u''

С точкой — только текущий путь:

''git add -A . = git add . + git add -u .''
